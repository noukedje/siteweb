<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      lang="fr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Panier/Formulaire de paiement</title>
	<link rel="icon" type="image/x-icon" href="../static/images/favicon.ico" th:href="@{/images/favicon.ico}">
    <link href="../static/css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
	<link href="../static/css/mystyle.css" th:href="@{/css/mystyle.css}" rel="stylesheet">
    <link href="../static/css/form-validation.css" th:href="@{/css/form-validation.css}" rel="stylesheet">  
 	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Sofia&effect=neon|outline|emboss|shadow-multiple">
 	<link href="../static/css/form-validation.css" th:href="@{/css/form-validation.css}" rel="stylesheet">  
   <link href="../static/css/fontawesome/css/all.css" th:href="@{/css/fontawesome/css/all.css}" rel="stylesheet">
    <script src="../static/js/jquery-3.6.0.min.js" th:src="@{/js/jquery-3.6.0.min.js}"></script>
    <script defer src="../static/js/friconix-0.2248.js" th:src="@{/js/friconix.js}"> </script>
    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>
    <script>
        function clicdroit(obj){
	       productId=$(obj).attr("pid");
		   qtyInput=$("#quantity" + productId).val();
		   newqty=parseInt(qtyInput)+1;
		   if (newqty>0) {
			  $("#quantity" + productId).val(newqty);
		      prix=parseInt($("#prix"+productId).html());
		      sub=parseInt($("#subtotal" + productId).html());
		      sub=sub+prix;
		      $("#subtotal" + productId).html(sub);
		      total=parseInt($("#total").html());
		      total=total+prix;
		      $("#total").html(total);
		      updateCartItemQuantity(productId, newqty);
		   } 
        }
      
        function clicgauche(obj){
	      productId=$(obj).attr("pid");
		  qtyInput=$("#quantity" + productId).val();
		  newqty=parseInt(qtyInput)-1;
		  if (newqty>0) {
			  updateCartItemQuantity(productId, newqty);
			  $("#quantity" + productId).val(newqty);
		      prix=parseInt($("#prix"+productId).html());
		      sub=sub-prix;
		      $("#subtotal" + productId).html(sub);
		      total=parseInt($("#total").html());
		      total=total-prix;
		      $("#total").html(total);    
		      updateCartItemQuantity(productId, newqty);
		   } 
        }
	
    </script>
  </head>
<body class="mainback">
    
    <th:block th:include="/header"></th:block>
<div class="container">
  <main>
    <div class="py-5 text-center">
      <img class="d-block mx-auto mb-4 rounded" src="../static/images/favicon.ico" th:src="@{/images/favicon.ico}" alt="" width="72" height="57">
      <h2>Formulaire de paiement</h2>
      <p class="lead">Faites le choix de payer par Mobile Money ou par Carte électronique en précisant les informations de l'adresse de facturation.</p>
    </div>

    <div class="row g-5">
      <div class="col-md-6 col-lg-4 order-md-last" th:object="${cart}">
        <h4 class="d-flex justify-content-between align-items-center mb-3">
          <span class="text-primary">Votre panier</span>
          <span class="badge bg-primary rounded-pill" id="cart-item-count">[[${cart.ItemCount}]]</span>
        </h4>
        <ul class="list-group mb-3" th:if="${!#lists.isEmpty(cart.items)}">
          <li class="list-group-item d-flex justify-content-between lh-sm" th:each="item : ${cart.items}">
            <div>
              <h6 class="my-0" style="color:blue;transform:uppercase;">[[${item.produit.designation}]]</h6>
              <small class="text-muted">PU </small><small class="text-muted" th:id="'prix'+${item.produit.idproduit}">[[${item.produit.prix}]]</small><small class="text-muted"> FCFA</small>
              <nav class="my-2">
			   <ul class="pagination">
			      <li class="btnmoins">
				     <button class="form-control" th:pid="${item.produit.idproduit}" onclick="clicgauche(this)" style="max-height:35px;"><b>-</b></button>
			      </li>
			      <li class="page-item">
			         <input type="text" th:value="${item.qtecdee}" readonly class="form-control text-center" onkeydown="return false;" style="max-width:50px;max-height:35px;" th:id="'quantity' + ${item.produit.idproduit}"/>
			      </li>
				  <li class="btnplus">     
				     <button class="form-control" th:pid="${item.produit.idproduit}" onclick="clicdroit(this)" style="max-height:35px;"><b>+</b></button>
			      </li>
			      <li class="page-item">
			         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="fa fa-trash" href="#" style="color:red" th:onclick="|removeItemFromCart('${item.produit.idproduit}')|"></a>
			      </li> 
			   </ul>
		       <!--<button class="btn btn-primary rounded-pill" th:onclick="|updateCartItemQuantity('${item.produit.idproduit}', '${item.produit.idproduit}')|">Editer le panier</button>-->
			 </nav>
            </div>
            <span class="text-muted" th:id="'subtotal'+${item.produit.idproduit}">[[${item.qtecdee}*${item.produit.prix}]]</span>
          </li>
          
          <li class="list-group-item d-flex justify-content-between">
            <span style="font-weight: bold;">Total(FCFA)</span>
            <strong id="total">[[${cart.TotalAmount}]]</strong>
          </li>
        </ul>

      </div>
      <div class="col-md-6 col-lg-8">
        <h4 class="mb-3">Adresse de facturation</h4>
        <form class="needs-validation" novalidate>
          <div class="row g-3">
            <div class="col-sm-6">
              <label for="firstName" class="form-label">Votre nom complet</label>
              <input type="text" class="form-control" id="firstName" placeholder="Votre nom complet" required>
              <div class="invalid-feedback">
                Votre nom complet est requis.
              </div>
            </div>

            <div class="col-12">
              <label for="email" class="form-label">Email <span class="text-muted">(Optionelle)</span></label>
              <input type="email" class="form-control" id="email" placeholder="vous@example.com">
            </div>

            <div class="col-12">
              <label for="address" class="form-label">Adresse</label>
              <input type="text" class="form-control" id="address" placeholder="1234 Main St" required>
              <div class="invalid-feedback">
                Veuillez entrer l'adresse de livraison.
              </div>
            </div>

            <div class="col-md-5">
              <label for="region" class="form-label">Région</label>
              <select class="form-select" id="region" required readonly>
                <option>Littoral</option>
                <option>Ouest</option>
                <option>Centre</option>
                <option>Nord-Ouest</option>
                <option>Sud-Ouest</option>
                <option>Nord</option>
                <option>Sud</option>
                <option>Est</option>
                <option>Extrême-Nord</option>
                <option>Adamaoua</option>
              </select>
            </div>

            <div class="col-md-4">
              <label for="ville" class="form-label">Ville</label>
              <select class="form-select" id="ville" required>
                <option>Douala</option>
                <option>Yaounde</option>
                <option>Bafoussam</option>
                <option>Bangangté</option>
                <option>Est</option>
                <option>Edea</option>
                <option>Bamenda</option>
                <option>Buea</option>
                <option>Ebolowa</option>
                <option>Kribi</option>
                <option>Garoua</option>
                <option>Maroua</option>
              </select>
            
            </div>

           
          </div>

          <hr class="my-4">

          <h4 class="mb-3">Paiement par Mobile Money</h4>
          <div class="row my-3">
            <div class="col">
             <label for="mobile" class="form-label">Réseau Mobile Money</label>
              <select class="form-select" id="mobile" required>
                <option>AUCUN MONEY</option>
                <option selected>MTN MOMO</option>
                <option>ORANGE MONEY</option>
                <option>SARAH MONEY</option>
                <option>YOOMEE MONEY</option>
              </select>
           </div>
           <div class="col"> 
              <label for="code" class="form-label">Code Mobile Money</label>
              <input type="password" class="form-control" id="code" placeholder="" required>
              <div class="invalid-feedback">
                Votre code de paiement mobile money est requis.
              </div>
           </div>
           <div class="col">   
              <label for="tel" class="form-label">Numéro de téléphone</label>
              <input type="tel" class="form-control" id="tel" placeholder="" required>
              <div class="invalid-feedback">
                Votre numéro de téléphone mobile money est requis.
              </div>
           </div>
          </div>
          <h4 class="mb-3">Paiement par carte électronique</h4>
          <div class="my-3">
            <div class="form-check">
              <input id="nocard" name="paymentMethod" type="radio" class="form-check-input" checked required>
              <label class="form-check-label" for="nocard">Aucune carte de crédit</label>
            </div>
            <div class="form-check">
              <input id="credit" name="paymentMethod" type="radio" class="form-check-input" required>
              <label class="form-check-label" for="credit">Carte de crédit</label>
            </div>
            <div class="form-check">
              <input id="debit" name="paymentMethod" type="radio" class="form-check-input" required>
              <label class="form-check-label" for="debit">Carte de débit</label>
            </div>
            <div class="form-check">
              <input id="paypal" name="paymentMethod" type="radio" class="form-check-input" required>
              <label class="form-check-label" for="paypal">PayPal</label>
            </div>
          </div>

          <div class="row gy-3">
            <div class="col-md-6">
              <label for="cc-name" class="form-label">Nom sur la carte</label>
              <input type="text" class="form-control" id="cc-name" placeholder="" required>
              <small class="text-muted">Nom complet comme sur la carte</small>
              <div class="invalid-feedback">
                Votre nom de carte est requis.
              </div>
            </div>

            <div class="col-md-6">
              <label for="cc-number" class="form-label">Numéro de la carte de crédit</label>
              <input type="text" class="form-control" id="cc-number" placeholder="" required>
              <div class="invalid-feedback">
               Numéro de la carte de crédit est requis.
              </div>
            </div>

            <div class="col-md-3">
              <label for="cc-expiration" class="form-label">Expiration</label>
              <input type="text" class="form-control" id="cc-expiration" placeholder="" required>
              <div class="invalid-feedback">
                Date d'expiration requise.
              </div>
            </div>

            <div class="col-md-3">
              <label for="cc-cvv" class="form-label">CVV</label>
              <input type="text" class="form-control" id="cc-cvv" placeholder="Code de sécurité" required>
              <div class="invalid-feedback">
                Code de sécurité requis.
              </div>
            </div>
          </div>

          <hr class="my-4">

          <button class="w-100 btn btn-primary btn-lg" type="submit">Effectuer le paiement</button>
        </form>
      </div>
    </div>
  </main>

  
</div>


   <th:block th:include="/footer"></th:block>
     
  </body>
</html>
